<!--
  @author Artem Lytvynov
  @copyright Artem Lytvynov
  @license Apache-2.0
-->

<!DOCTYPE html>
<html>
  <head>
    <script src="/bin/charts.min.js"></script>
    <script src="/bin/elements.min.js"></script>
    <script>
      const hdml = window['@hdml/elements'];
      (async () => {await hdml.defineDefaults();})();
    </script>
    <link rel="stylesheet" href="/example.css" />
    <title>HDML Example: MAANG Stock</title>
  </head>
  <body>

    <form>
      <input type="radio" id="Black" name="color" value="black" checked>
      <label for="Black">Black color</label>
  
      <input type="radio" id="Blue" name="color" value="blue">
      <label for="Blue">Blue color</label>
  
      <input type="radio" id="Green" name="color" value="green">
      <label for="Green">Green color</label>
      <br>
  
      <input type="radio" id="Normal" name="line" value="normal" checked>
      <label for="Normal">Normal lines</label>
  
      <input type="radio" id="Bold" name="line" value="bold">
      <label for="Bold">Bold lines</label>
  
      <script>
        function colorListener(event) {
          const cls = event.target.value;
          document.body.classList.remove("blue", "green");
          if (cls !== "black") document.body.classList.add(cls);
        }
        function lineListener(event) {
          const cls = event.target.value;
          document.body.classList.remove("bold");
          if (cls !== "normal") document.body.classList.add(cls);
        }
        window.document.getElementById("Black").addEventListener("change", colorListener);
        window.document.getElementById("Blue").addEventListener("change", colorListener);
        window.document.getElementById("Green").addEventListener("change", colorListener);
        window.document.getElementById("Normal").addEventListener("change", lineListener);
        window.document.getElementById("Bold").addEventListener("change", lineListener);
      </script>
    </form>

    <!-- Server -->
    <hdml-io
      name="hdml.io"
      host="http://localhost:8887"
      tenant="common"
      token="eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIn0.ZsYF11lNJ7RQWuT-dFSR9IRpFp1BjfFTq7X1Iyk-0mND9T65baoDbj11xlWm103H6kAVQPyTFGOa3PHxOzjD_6EXklJ-Jhd5eBBwzj95h_0UCd8fnJjxJF-_p9CR0JBGGUrtgTcJvtQrE8JWSsX7cvH71WvkYmxyQiONT5zMfc9mHDBG0xbWRUiIo9Ha43xf1KGL-H179QRT2JW-ictbssxUDeaOcjNIfegZ-URJ5Rhxx03S08cgOVjEi8zA4qVSzCxRIs0TeNBiex7NheutR5nuSw8eLcT5LlTA13DjAs49vHQO4zHv5HItM0VGDIyki6oZ1FLa3ErcN1ccBkEpKE3LLcgT54Tay0SNVLo0GwcqMhTUJVtdkPDRTxGvC3tNxbWB2whiBTAYDUqUr8ikJKtEql8DklLQLvnm_6dDdWzFO5cG65U6e0GVQskhTpTatSvDDyQgi3FU3EwI5qpHXYA0CXA6FD-7yK5jbDA2d4oLgSbk0uHKlTiTC7BuBl-y.EiqeIU4IFMc9z48t.pvRR664uRbh5OH-UCGV7ld93KnregSxMP7MWH4-XZhXdv8MDeL8XQI0RUzTlBd27FrhMW32W_H6XwMmUP_LJwhCNu-OZXOn2M5udUMjKl3TTjkLRJSWsCs2WMi7hXVWmhfYgXBnPPC5hPI1fxqn_-3s_W9o.dGgZk2suZDFoEcY-_c93mQ">
    </hdml-io>

    <hdml-frame
      id="query"
      name="maang_stock_grouped"
      source="/frames/maang_stock.html?hdml-frame=maang_stock">

      <!-- dimensions -->

      <hdml-field
        name="label"
        clause="concat(`year`, '-', `month`, '-', `day`)">
      </hdml-field>
      <hdml-field
        name="year">
      </hdml-field>
      <hdml-field
        name="month">
      </hdml-field>
      <hdml-field
        name="day">
      </hdml-field>

      <!-- measures -->
      <hdml-field
        name="avg_amazon_volume"
        origin="amazon_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_apple_volume"
        origin="apple_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_google_volume"
        origin="google_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_microsoft_volume"
        origin="microsoft_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_netflix_volume"
        origin="netflix_volume"
        agg="avg">
      </hdml-field>

      <hdml-group-by>
        <hdml-field name="year"></hdml-field>
        <hdml-field name="month"></hdml-field>
        <hdml-field name="day"></hdml-field>
      </hdml-group-by>

      <hdml-sort-by>
        <hdml-field name="year" asc="true"></hdml-field>
        <hdml-field name="month" asc="true"></hdml-field>
        <hdml-field name="day" asc="true"></hdml-field>
      </hdml-sort-by>

      <hdml-filter-by>
        <hdml-connective
          operator="and">
          <!-- <hdml-filter
            type="expr"
            clause="`year` >= '2004'">
          </hdml-filter> -->
          <hdml-filter
            type="expr"
            clause="`year` in ('2005')">
          </hdml-filter>
          <hdml-filter
            type="expr"
            clause="`month` in ('05')">
          </hdml-filter>
        </hdml-connective>
      </hdml-filter-by>

    </hdml-frame>

    <div class="container">
      
      <div class="block">

        <h1>Average Stocks Volumes</h1>

        <table>
          <tr>
            <td class="amazon">Amazon</td>
            <td class="apple">Apple</td>
            <td class="google">Google</td>
            <td class="microsoft">Microsoft</td>
            <td class="netflix">Netflix</td>
          </tr>
        </table>
        <br/>
        
        <hdml-view>
          
          <cartesian-plane>

            <ordinal-scale
              bandwidth="0"
              values='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'>
              
              <linear-scale
                min="0"
                max="1000000000">

                <!-- Area -->
                <!-- <data-area
                  x='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'
                  y0="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]"
                  y1="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]">
                </data-area> -->

                <!-- Lines -->
                <data-line
                  class="amazon"
                  x='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'
                  y="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]">
                </data-line>
                <data-line
                  class="apple"
                  x='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'
                  y="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]">
                </data-line>
                <data-line
                  class="google"
                  x='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'
                  y="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]">
                </data-line>
                <data-line
                  class="microsoft"
                  x='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'
                  y="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]">
                </data-line>
                <data-line
                  class="netflix"
                  x='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'
                  y="[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]">
                </data-line>

                <!-- Point -->
                <data-point
                  class="amazon"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="apple"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="google"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="microsoft"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="netflix"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>

                <!-- Label -->
                <data-point
                  class="labels amazon"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels apple"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels google"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels microsoft"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels netflix"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>

                <!-- X-axis -->
                <horizontal-axis
                  dimension="x">
                </horizontal-axis>
                <horizontal-axis-grid
                  dimension="x"
                  values='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'>
                </horizontal-axis-grid>
                <horizontal-axis-tick
                  dimension="x"
                  values='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'>
                </horizontal-axis-tick>
                <horizontal-axis-tick
                  class="labels"
                  dimension="x"
                  values='["2000-01", "2000-02", "2000-03", "2000-04", "2000-05", "2000-06", "2000-07", "2000-08", "2000-09", "2000-10", "2000-11", "2000-12"]'>
                </horizontal-axis-tick>

                <!-- Y-axis -->
                <vertical-axis
                  dimension="y">
                </vertical-axis>
                <vertical-axis-grid
                  dimension="y"
                  count="10">
                </vertical-axis-grid>
                <vertical-axis-tick
                  dimension="y"
                  count="10">
                </vertical-axis-tick>
                <vertical-axis-tick
                  class="labels"
                  dimension="y"
                  count="10">
                </vertical-axis-tick>

              </linear-scale>
            
            </ordinal-scale>

          </cartesian-plane>
        
        </hdml-view>
      
      </div>
    
    </div>

    <script src="/example.js"></script>
  </body>
</html>