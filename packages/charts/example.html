<!--
  @author Artem Lytvynov
  @copyright Artem Lytvynov
  @license Apache-2.0
-->

<!DOCTYPE html>
<html>
  <head>
    <script src="/bin/charts.min.js"></script>
    <script src="/bin/elements.min.js"></script>
    <script>
      const hdml = window['@hdml/elements'];
      (async () => {await hdml.defineDefaults();})();
    </script>
    <link rel="stylesheet" href="/example.css" />
    <title>HDML Example: MAANG Stock</title>
  </head>
  <body>

    <form>
      <input type="radio" id="Black" name="color" value="black" checked>
      <label for="Black">Black color</label>
  
      <input type="radio" id="Blue" name="color" value="blue">
      <label for="Blue">Blue color</label>
  
      <input type="radio" id="Green" name="color" value="green">
      <label for="Green">Green color</label>
      <br>
  
      <input type="radio" id="Normal" name="line" value="normal" checked>
      <label for="Normal">Normal lines</label>
  
      <input type="radio" id="Bold" name="line" value="bold">
      <label for="Bold">Bold lines</label>
  
      <script>
        function colorListener(event) {
          const cls = event.target.value;
          document.body.classList.remove("blue", "green");
          if (cls !== "black") document.body.classList.add(cls);
        }
        function lineListener(event) {
          const cls = event.target.value;
          document.body.classList.remove("bold");
          if (cls !== "normal") document.body.classList.add(cls);
        }
        window.document.getElementById("Black").addEventListener("change", colorListener);
        window.document.getElementById("Blue").addEventListener("change", colorListener);
        window.document.getElementById("Green").addEventListener("change", colorListener);
        window.document.getElementById("Normal").addEventListener("change", lineListener);
        window.document.getElementById("Bold").addEventListener("change", lineListener);
      </script>
    </form>

    <!-- Server -->

    <!-- No security scope -->
    <hdml-io
      name="hdml.io"
      host="http://localhost:8887"
      tenant="common"
      token="eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIn0.ACPdCKuyF_GKGOtt6STbV2_mZV5ltcTGViEwVm13ThbITzdQdedTyIGSPhyXfD31fsqnJI50AexG4xQzJkAqBWmVN--6_c6jepQH3vVyGA1UCyMMuwfcOCOI0dF6k6vJmBRYnJOB9gOqbpvSVxFpGPeLMlojogKzMyGCQpl336MzVLGugF2Q2C4gyuY7_IVbbFl_iS0IOGeQo0Rna-CTqjKGCylUtkU2uNnCDCE4yNslLirtrUI_yxHPpvBdm2_Oj4Gw2hfRUM45UjcFcRHYk3swgtj3Rbs32QQtGvJ7s-P1n2RFK9TXHv_TrsuerR2gHSV8xRqIymPcQj0CciUMRgvC0VM1Od61lEpZtNvBPGje41-lHWzCA3ji-0v8PTfckMzoE2tccEqqn2yXDebEYzPvSu7Cd2lYGJ8pXppJ5e4iO93A2TtHNvG_gZNWKjUv24TojvLICYOdh1Ro2D2wFfA30FZfPvEiBLkj5p4OcSFEATyIl7VTqzXFcU1VvLDM.0Y1jpM8d2kvpQXQ8.cgVqc9EwKxcL05kUBTSFXXaJNSfPD9wtDklV-XFJHINE1bMH-yHuM3aNdXbDa-ibCznZErCIaLXuFDcvSTbmSa8_KrJEnERTrS6Aj5BpbpNR6Kn_3evWjl4emK9zMuQDkU9V2N1SYtNPQgANOtYX4rLlX34.brByqvU5-vpSvpW8SmHOrA">
    </hdml-io>


    <!-- Security scope ("years": [2005, 2006, 2007, 2008]) -->
    <!-- <hdml-io
      name="hdml.io"
      host="http://localhost:8887"
      tenant="common"
      token="eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIn0.GqqGoRUufQbynN2tVYvxQADV4nYtBbJON4XnAQweCHmf9ziimEf40LF16dCSP0sNno9nAj61vtv_UeBs80GQdqRDHkRi_XrhHlCxgC4KHnUcpqjGVsX4smDHBEcIniQiBcNjUF_G66gr1bzYkCf7SfJOEOXrjOOy1RZvUbEsKIo_KEq3uES9_oq6anO3qAKfct5rQqNST0VPJ-rxieEnuYkzyDqxvE_pEIs5opVYUtHVNpZmZGk4fPvBQKahqBpr5wvXaX7D9iaao30qhUXN_PBlmN3zXknz4g6_GhsUPT8Xz_C_6iE7JNa3454V9ZM2tRc8FLYIAZ6EjcT6oKv_ee9yxmvj8YOYSs9PVjamQzEdr0AjDuX2rHhpinZ8LYj3XI7WTpRi6RZNKVe_FDEnZ6--BLBDYC4q7V2jlkiStvYD2uFjLxcIlExiwK0osbrh_hq4feN6jGH2DAuOJM4T1sAp0MOYsJvor34XywmDkV8bUOmtRKlvcpU-hWahq-7o.AE8j4xlCOsYSenES.WXEsvMXuZL6T-VWJHSZjRdbPD6up89QHpuGqvzLbPm4y_irwO67neKtPOZPKfX6v6uRTCOXe_feJygK17HpriD3hj3gCzrBhkZIYPTZhn5f7WFjACr-_Pof2ca64aVsQUd4lkE-vJgq9CcPvv_JfKOpLi45PyNOzOm9Ib_D5fzMUu5D8VyCpRysXH2PZVxY.wZvX3XSZUOeq7cSLLlHnbA">
    </hdml-io> -->

    <hdml-frame
      id="query"
      name="maang_stock_grouped"
      source="/maang/frame.html?hdml-frame=maang_stock">

      <!-- dimensions -->
      <hdml-field
        name="label"
        clause="cast(`year` as varchar)">
      </hdml-field>
      <hdml-field
        name="year">
      </hdml-field>

      <!-- measures -->
      <hdml-field
        name="avg_amazon_volume"
        origin="amazon_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_apple_volume"
        origin="apple_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_google_volume"
        origin="google_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_microsoft_volume"
        origin="microsoft_volume"
        agg="avg">
      </hdml-field>
      <hdml-field
        name="avg_netflix_volume"
        origin="netflix_volume"
        agg="avg">
      </hdml-field>

      <!-- grouping -->
      <hdml-group-by>
        <hdml-field name="year"></hdml-field>
      </hdml-group-by>

      <!-- sorting -->
      <hdml-sort-by>
        <hdml-field name="year" asc="true"></hdml-field>
      </hdml-sort-by>

      <!-- filtering -->
      <hdml-filter-by>
        <hdml-connective
          operator="and">
          <hdml-filter
            type="expr"
            clause="`year` >= 2004">
          </hdml-filter>
        </hdml-connective>
      </hdml-filter-by>

    </hdml-frame>

    <div class="container">
      
      <div class="block">

        <h1>Average Stocks Volumes</h1>

        <table>
          <tr>
            <td class="amazon">Amazon</td>
            <td class="apple">Apple</td>
            <td class="google">Google</td>
            <td class="microsoft">Microsoft</td>
            <td class="netflix">Netflix</td>
          </tr>
        </table>
        <br/>
        
        <hdml-view>
          
          <cartesian-plane>

            <ordinal-scale
              bandwidth="0"
              values='["2000-01", "2000-02", "2000-03"]'>
              
              <linear-scale
                min="0"
                max="1000000000">

                <!-- Lines -->
                <data-line
                  class="amazon"
                  x='["2000-01", "2000-02", "2000-03"]'
                  y="[0, 0, 0]">
                </data-line>
                <data-line
                  class="apple"
                  x='["2000-01", "2000-02", "2000-03"]'
                  y="[0, 0, 0]">
                </data-line>
                <data-line
                  class="google"
                  x='["2000-01", "2000-02", "2000-03"]'
                  y="[0, 0, 0]">
                </data-line>
                <data-line
                  class="microsoft"
                  x='["2000-01", "2000-02", "2000-03"]'
                  y="[0, 0, 0]">
                </data-line>
                <data-line
                  class="netflix"
                  x='["2000-01", "2000-02", "2000-03"]'
                  y="[0, 0, 0]">
                </data-line>

                <!-- Point -->
                <data-point
                  class="amazon"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="apple"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="google"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="microsoft"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="netflix"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>

                <!-- Label -->
                <data-point
                  class="labels amazon"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels apple"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels google"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels microsoft"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>
                <data-point
                  class="labels netflix"
                  x='["2000-01"]'
                  y="[0]">
                </data-point>

                <!-- X-axis -->
                <horizontal-axis
                  dimension="x">
                </horizontal-axis>
                <horizontal-axis-grid
                  dimension="x"
                  values='["2000-01", "2000-02", "2000-03"]'>
                </horizontal-axis-grid>
                <horizontal-axis-tick
                  class="tick year"
                  dimension="x"
                  values='["2000-01", "2000-02", "2000-03"]'>
                </horizontal-axis-tick>
                <horizontal-axis-tick
                  class="labels year"
                  dimension="x"
                  values='["2000-01", "2000-02", "2000-03"]'>
                </horizontal-axis-tick>

                <!-- Y-axis -->
                <vertical-axis
                  dimension="y">
                </vertical-axis>
                <vertical-axis-grid
                  dimension="y"
                  count="10">
                </vertical-axis-grid>
                <vertical-axis-tick
                  dimension="y"
                  count="10">
                </vertical-axis-tick>
                <vertical-axis-tick
                  class="labels"
                  dimension="y"
                  count="10">
                </vertical-axis-tick>

              </linear-scale>
            
            </ordinal-scale>

          </cartesian-plane>
        
        </hdml-view>
      
      </div>
    
    </div>

    <script src="/example.js"></script>
  </body>
</html>