/**
 * @fileoverview Package's export test suite definition.
 * @author Artem Lytvynov
 * @copyright Artem Lytvynov
 * @license Apache-2.0
 */

import { expect } from "@esm-bundle/chai";
import getUid from "./getUid";

const str =
  "^([0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab]" +
  "[0-9a-f]{3}-[0-9a-f]{12})|[0-9]+$";
const re = new RegExp(str);

describe("helpers/getUid", () => {
  it("getUid is defined and a function", () => {
    expect(getUid, "defined").not.to.equal(undefined);
    expect(typeof getUid, "function").to.equal("function");
  });

  it("getUid() returns unique value", () => {
    const val1 = getUid();
    const val2 = getUid();
    expect(val1).not.to.equal(undefined);
    expect(typeof val1).to.equal("string");
    expect(re.test(val1)).to.equal(true);
    expect(val2).not.to.equal(undefined);
    expect(typeof val2).to.equal("string");
    expect(re.test(val2)).to.equal(true);
    expect(val1 !== val2).to.equal(true);
  });

  it("getUid('string') returns unique for the string value", () => {
    const val1 = getUid("string1");
    const val2 = getUid("string1");
    const val3 = getUid("string2");
    expect(val1).not.to.equal(undefined);
    expect(typeof val1).to.equal("string");
    expect(re.test(val1)).to.equal(true);
    expect(val2).not.to.equal(undefined);
    expect(typeof val2).to.equal("string");
    expect(re.test(val2)).to.equal(true);
    expect(val3).not.to.equal(undefined);
    expect(typeof val3).to.equal("string");
    expect(re.test(val3)).to.equal(true);
    expect(val1 === val2).to.equal(true);
    expect(val1 !== val3).to.equal(true);
  });
});
